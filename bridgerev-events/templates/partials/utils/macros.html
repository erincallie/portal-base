<!--
    templateType: page
    isAvailableForNewContent: false
-->
<!-- Begin partial -->


<!--
    templateType: page
    isAvailableForNewContent: false
-->

{####  

    TABLE OF CONTENTS

          Globals
            slugify - create a slug from a string
            icons - insert an SVG
            waves - stylistic section decoration
            modal_wrap - enables lity plugin
          Filters
            render_search - input for search
            render_filter - creates a data trigger for Isotope to filter by the trigger value
            render_filter_group - creates an accordion toggle for related filters
            render_sorts - creates a data trigger for Isotope to sort
          Cards
            render_card
            basic_card
            render_podcast
          Modules
            render_video
            render_calendar
          Styles
            flex_grid
            transition
            transform
            borderRadius
            boxShadow
            textShadow
         Scripts
            isotope_js

####}

{##  GLOBALS  ##}

{% macro slugify(string) %}
  {{ string|regex_replace("[^a-zA-Z]", "-")|regex_replace("[0-9]", "num")|replace(" ","-")|replace(",","-")|replace("$","-")|replace(":","-")|replace("&","and")|lower|trim }}
{% endmacro %}

{% macro icons(name, id) %}
  {% set this_id = range(id,1000000)|random|first if id %}
  {% if name == "skinny-arrow" %}
    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="16" viewBox="0 0 28 16" fill="none">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M27.7014 7.29216C27.7945 7.38503 27.8684 7.49535 27.9188 7.61682C27.9692 7.73828 27.9951 7.86849 27.9951 8C27.9951 8.1315 27.9692 8.26172 27.9188 8.38318C27.8684 8.50464 27.7945 8.61497 27.7014 8.70784L20.703 15.7063C20.5631 15.8465 20.3848 15.942 20.1907 15.9807C19.9965 16.0194 19.7952 15.9996 19.6123 15.9238C19.4294 15.848 19.2731 15.7196 19.1633 15.5548C19.0534 15.3901 18.995 15.1964 18.9953 14.9984L18.9953 9.99955L1.99915 9.99955C1.46883 9.99955 0.960237 9.78888 0.585248 9.41389C0.21026 9.03891 -0.000406679 8.53031 -0.000406653 8C-0.000406627 7.46968 0.21026 6.96109 0.585249 6.5861C0.960237 6.21111 1.46883 6.00045 1.99915 6.00045L18.9953 6.00045L18.9953 1.00157C18.995 0.803568 19.0534 0.609924 19.1633 0.445183C19.2731 0.280442 19.4294 0.152022 19.6123 0.0762036C19.7952 0.000385512 19.9965 -0.0194162 20.1907 0.0193087C20.3848 0.0580336 20.5631 0.153541 20.703 0.293723L27.7014 7.29216Z" fill="#333132"/>
    </svg>
  {% elif name == "location" %}
    <svg xmlns="http://www.w3.org/2000/svg" style="transform:scale(1.5);transform-origin:center;" width="16" height="16" viewBox="0 0 16 16" fill="none">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M7.47834 0.376801C10.7359 0.376801 13.4493 3.09022 13.4493 6.34657C13.4493 7.41007 13.0841 8.45866 12.5734 9.40786C12.0603 10.362 11.382 11.2516 10.7086 12.0095C10.1215 12.6688 9.49016 13.2873 8.81889 13.8607C8.59968 14.0485 8.3734 14.228 8.14054 14.3986C8.062 14.4557 7.98117 14.5096 7.89827 14.5601C7.82949 14.601 7.75713 14.6355 7.68209 14.6632C7.51592 14.7169 7.33537 14.7035 7.17891 14.626C7.13719 14.6062 7.09655 14.5842 7.05716 14.5601C6.97377 14.5084 6.89254 14.4533 6.81365 14.3949C6.58115 14.2234 6.35529 14.0431 6.13653 13.8544C5.46602 13.278 4.83511 12.6571 4.24808 11.9958C3.57469 11.2354 2.89634 10.3434 2.38446 9.39295C1.87383 8.44624 1.50732 7.40137 1.50732 6.34657C1.50732 3.09022 4.22074 0.376801 7.47834 0.376801ZM7.47834 8.12942C7.00549 8.12942 6.55202 7.94159 6.21767 7.60724C5.88332 7.27289 5.69548 6.81941 5.69548 6.34657C5.69548 5.87373 5.88332 5.42025 6.21767 5.0859C6.55202 4.75155 7.00549 4.56371 7.47834 4.56371C7.95118 4.56371 8.40465 4.75155 8.739 5.0859C9.07335 5.42025 9.26119 5.87373 9.26119 6.34657C9.26119 6.81941 9.07335 7.27289 8.739 7.60724C8.40465 7.94159 7.95118 8.12942 7.47834 8.12942Z" fill="#333132"/>
    </svg>
  {% elif name == "clock" %}
    <svg xmlns="http://www.w3.org/2000/svg" style="transform:scale(1.5);transform-origin:center;" width="16" height="16" viewBox="0 0 16 16" fill="none">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M7.58902 14.0495C8.43731 14.0495 9.2773 13.8824 10.061 13.5578C10.8447 13.2332 11.5568 12.7574 12.1567 12.1575C12.7565 11.5577 13.2323 10.8456 13.5569 10.0619C13.8816 9.27815 14.0486 8.43817 14.0486 7.58988C14.0486 6.74159 13.8816 5.9016 13.5569 5.11788C13.2323 4.33417 12.7565 3.62206 12.1567 3.02223C11.5568 2.4224 10.8447 1.94659 10.061 1.62196C9.2773 1.29733 8.43731 1.13025 7.58902 1.13025C5.87582 1.13025 4.23279 1.81081 3.02138 3.02223C1.80996 4.23365 1.12939 5.87668 1.12939 7.58988C1.12939 9.30308 1.80996 10.9461 3.02138 12.1575C4.23279 13.3689 5.87582 14.0495 7.58902 14.0495ZM8.2619 4.36006C8.2619 4.1816 8.19101 4.01046 8.06482 3.88427C7.93863 3.75808 7.76748 3.68719 7.58902 3.68719C7.41056 3.68719 7.23941 3.75808 7.11322 3.88427C6.98704 4.01046 6.91614 4.1816 6.91614 4.36006V7.58988C6.91614 7.96131 7.21759 8.26275 7.58902 8.26275H10.2805C10.459 8.26275 10.6301 8.19186 10.7563 8.06567C10.8825 7.93948 10.9534 7.76834 10.9534 7.58988C10.9534 7.41142 10.8825 7.24027 10.7563 7.11408C10.6301 6.98789 10.459 6.917 10.2805 6.917H8.2619V4.36006Z" fill="#333132"/>
    </svg>
  {% elif name == "play" %}
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24ZM9.36738 6.80546C9.56572 6.69557 9.78879 6.63802 10.0155 6.63825C10.2503 6.63795 10.4811 6.6996 10.6844 6.81697L17.3041 10.8808C17.5085 10.9837 17.6803 11.1412 17.8003 11.3359C17.9204 11.5306 17.984 11.7549 17.9841 11.9836C17.9842 12.2124 17.9207 12.4367 17.8008 12.6315C17.6809 12.8263 17.5092 12.984 17.3049 13.0869L10.6852 17.1815C10.4854 17.2974 10.2589 17.3594 10.0279 17.3616C9.79691 17.3637 9.56931 17.3059 9.36738 17.1937C9.16397 17.0901 8.99262 16.933 8.87168 16.7393C8.75074 16.5457 8.68478 16.3228 8.68086 16.0945V16.0884V7.90466C8.68478 7.67639 8.75074 7.45349 8.87168 7.25985C8.99262 7.06622 9.16397 6.90914 9.36738 6.80546Z" fill="#333132"/>
    </svg>
  {% elif name == "edit" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"/></svg>
  {% elif name == "bookmark" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="16" width="12" viewBox="0 0 384 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"/></svg>
  {% elif name == "add-to-calendar" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="1rem" width="1rem" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M184 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H96c-35.3 0-64 28.7-64 64v16 48V448c0 35.3 28.7 64 64 64H416c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H376V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H184V24zM80 192H432V448c0 8.8-7.2 16-16 16H96c-8.8 0-16-7.2-16-16V192zm176 40c-13.3 0-24 10.7-24 24v48H184c-13.3 0-24 10.7-24 24s10.7 24 24 24h48v48c0 13.3 10.7 24 24 24s24-10.7 24-24V352h48c13.3 0 24-10.7 24-24s-10.7-24-24-24H280V256c0-13.3-10.7-24-24-24z"/></svg>
  {% elif name == "mute" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="1rem" width="1rem" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M48.4 14.8L29.4 .1 0 38 19 52.7 591.5 497.2l19 14.7L639.9 474l-19-14.7-95.1-73.8C557 351.3 576 305.9 576 256c0-62.8-30.2-118.6-76.8-153.6l-28.8 38.4c35 26.3 57.6 68.1 57.6 115.2c0 38.8-15.3 74-40.3 99.9l-38.2-29.7C468.3 308.7 480 283.7 480 256c0-31.4-15.1-59.3-38.4-76.8l-28.8 38.4c11.7 8.8 19.2 22.7 19.2 38.4s-7.5 29.6-19.2 38.4l5.9 7.9L352 250.5V32H304L195.2 128.7 48.4 14.8zM352 373.3L81.2 160H32V352H160L304 480h48V373.3z"/></svg>
  {% elif name == "share" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="1rem" width="1rem" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>
  {% elif name == "save" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="1rem" width="1rem" viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"/></svg>
  {% elif name == "caret-down" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="1rem" width="1rem" viewBox="0 0 320 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"/></svg>
  {% elif name == "list" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zM96 288a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm32-128a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM96 384a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm96-248c-13.3 0-24 10.7-24 24s10.7 24 24 24H352c13.3 0 24-10.7 24-24s-10.7-24-24-24H192zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24H352c13.3 0 24-10.7 24-24s-10.7-24-24-24H192zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24H352c13.3 0 24-10.7 24-24s-10.7-24-24-24H192z"/></svg>
  {% elif name == "angle-left" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="1rem" width="1rem" viewBox="0 0 320 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
  {% elif name == "angle-right" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="1rem" width="1rem" viewBox="0 0 320 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg>
  {% elif name == "dots" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 128 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"/></svg>
  {% elif name == "plus" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="1rem" width="1rem" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24V232H40c-13.3 0-24 10.7-24 24s10.7 24 24 24H200V440c0 13.3 10.7 24 24 24s24-10.7 24-24V280H408c13.3 0 24-10.7 24-24s-10.7-24-24-24H248V72z"/></svg>
  {% elif name == "minus" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M432 256c0 13.3-10.7 24-24 24L40 280c-13.3 0-24-10.7-24-24s10.7-24 24-24l368 0c13.3 0 24 10.7 24 24z"/></svg>
  {% elif name == "calendar" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" style="padding:.1rem;" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"/></svg>
  {% elif name == "facebook" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64h98.2V334.2H109.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H255V480H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"/></svg>
  {% elif name == "twitter" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm297.1 84L257.3 234.6 379.4 396H283.8L209 298.1 123.3 396H75.8l111-126.9L69.7 116h98l67.7 89.5L313.6 116h47.5zM323.3 367.6L153.4 142.9H125.1L296.9 367.6h26.3z"/></svg>
  {% elif name == "linkedin" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
  {% elif name == "mail" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"/></svg>
  {% elif name == "whatsapp" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M92.1 254.6c0 24.9 7 49.2 20.2 70.1l3.1 5-13.3 48.6L152 365.2l4.8 2.9c20.2 12 43.4 18.4 67.1 18.4h.1c72.6 0 133.3-59.1 133.3-131.8c0-35.2-15.2-68.3-40.1-93.2c-25-25-58-38.7-93.2-38.7c-72.7 0-131.8 59.1-131.9 131.8zM274.8 330c-12.6 1.9-22.4 .9-47.5-9.9c-36.8-15.9-61.8-51.5-66.9-58.7c-.4-.6-.7-.9-.8-1.1c-2-2.6-16.2-21.5-16.2-41c0-18.4 9-27.9 13.2-32.3c.3-.3 .5-.5 .7-.8c3.6-4 7.9-5 10.6-5c2.6 0 5.3 0 7.6 .1c.3 0 .5 0 .8 0c2.3 0 5.2 0 8.1 6.8c1.2 2.9 3 7.3 4.9 11.8c3.3 8 6.7 16.3 7.3 17.6c1 2 1.7 4.3 .3 6.9c-3.4 6.8-6.9 10.4-9.3 13c-3.1 3.2-4.5 4.7-2.3 8.6c15.3 26.3 30.6 35.4 53.9 47.1c4 2 6.3 1.7 8.6-1c2.3-2.6 9.9-11.6 12.5-15.5c2.6-4 5.3-3.3 8.9-2s23.1 10.9 27.1 12.9c.8 .4 1.5 .7 2.1 1c2.8 1.4 4.7 2.3 5.5 3.6c.9 1.9 .9 9.9-2.4 19.1c-3.3 9.3-19.1 17.7-26.7 18.8zM448 96c0-35.3-28.7-64-64-64H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96zM148.1 393.9L64 416l22.5-82.2c-13.9-24-21.2-51.3-21.2-79.3C65.4 167.1 136.5 96 223.9 96c42.4 0 82.2 16.5 112.2 46.5c29.9 30 47.9 69.8 47.9 112.2c0 87.4-72.7 158.5-160.1 158.5c-26.6 0-52.7-6.7-75.8-19.3z"/></svg>
  {% elif name == "zoom" %}
    <div class="icon">
      <img src="https://23688064.fs1.hubspotusercontent-na1.net/hubfs/23688064/zoom-logo.png" aria-hidden="true" width="24" height="24" />
    </div>
  {% elif name == "upload" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M246.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 109.3V320c0 17.7 14.3 32 32 32s32-14.3 32-32V109.3l73.4 73.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-128-128zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64c0 53 43 96 96 96H352c53 0 96-43 96-96V352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V352z"/></svg>
  {% elif name == "lock" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"/></svg>
  {% elif name == "repeat" %}
    <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M0 224c0 17.7 14.3 32 32 32s32-14.3 32-32c0-53 43-96 96-96H320v32c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-9.2-9.2-22.9-11.9-34.9-6.9S320 19.1 320 32V64H160C71.6 64 0 135.6 0 224zm512 64c0-17.7-14.3-32-32-32s-32 14.3-32 32c0 53-43 96-96 96H192V352c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9l-64 64c-12.5 12.5-12.5 32.8 0 45.3l64 64c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V448H352c88.4 0 160-71.6 160-160z"/></svg>
  {% endif %}
{% endmacro %}

{% set button_styles = {
  'primary': {
    'color': theme.button_styles.primary_button.default.text_color.color,
    'background-color': theme.button_styles.primary_button.default.background_color.color,
    'border-color': theme.button_styles.primary_button.default.border_color.color
  },
  'primary-hover': {
    'color': theme.button_styles.primary_button.hovered.text_color.color,
    'background-color': theme.button_styles.primary_button.hovered.background_color.color,
    'border-color': theme.button_styles.primary_button.hovered.border_color.color
  },
  'secondary': {
    'color': theme.button_styles.secondary_button.default.text_color.color,
    'background-color': theme.button_styles.secondary_button.default.background_color.color,
    'border-color': theme.button_styles.secondary_button.default.border_color.color
  },
  'secondary-hover': {
    'color': theme.button_styles.secondary_button.hovered.text_color.color,
    'background-color': theme.button_styles.secondary_button.hovered.background_color.color,
    'border-color': theme.button_styles.secondary_button.hovered.border_color.color
  },
  'tertiary': {
    'color': theme.button_styles.tertiary_button.default.text_color.color,
    'background-color': theme.button_styles.tertiary_button.default.background_color.color,
    'border-color': theme.button_styles.tertiary_button.default.border_color.color
  },
  'tertiary-hover': {
    'color': theme.button_styles.tertiary_button.hovered.text_color.color,
    'background-color': theme.button_styles.tertiary_button.hovered.background_color.color,
    'border-color': theme.button_styles.tertiary_button.hovered.border_color.color
  },
  'light': {
    'color': theme.button_styles.light_button.default.text_color.color,
    'background-color': theme.button_styles.light_button.default.background_color.color,
    'border-color': theme.button_styles.light_button.default.border_color.color
  },
  'light-hover': {
    'color': theme.button_styles.light_button.hovered.text_color.color,
    'background-color': theme.button_styles.light_button.hovered.background_color.color,
    'border-color': theme.button_styles.light_button.hovered.border_color.color
  },
   'dark': {
      'color': theme.button_styles.dark_button.default.text_color.color,
      'background-color': theme.button_styles.dark_button.default.background_color.color,
      'border-color': theme.button_styles.dark_button.default.border_color.color
    },
    'dark-hover': {
      'color': theme.button_styles.dark_button.hovered.text_color.color,
      'background-color': theme.button_styles.dark_button.hovered.background_color.color,
      'border-color': theme.button_styles.dark_button.hovered.border_color.color
    }
} %}

{% macro build_button(target, button_style) %}
  {% if button_style.split("_")|last == "outline" %}
    {% set base = button_styles[button_style.split("_")|first] %}
    {{ target }} {
      background-color: transparent !important;
      color: {{ base["border-color"] }};
      border-color: {{ base["border-color"] }};
    }
    {{ target }}:hover {
      color: {{ base["color"] }};
      border-color: {{ base["border-color"] }};
      background-color: {{ base["border-color"] }} !important;
    }
  {% else %}
    {% set base = button_styles[button_style] %}
    {% set hover = button_styles[button_style + "-hover"] %}
    {{ target }} {
      background-color: {{ base["background-color"] }} !important;
      color: {{ base["color"] }};
      border-color: {{ base["border-color"] }};
    }
    {{ target }}:hover {
      background-color: {{ hover["background-color"] }} !important;
      color: {{ hover["color"] }};
      border-color: {{ hover["border-color"] }};
    }
  {% endif %}
{% endmacro %}


{% macro render_event_details(event) %}
<div class="event-details">
  <div class="event-details__inner">
    
  </div>
</div>
{% endmacro %}

{##  FILTERS  ##}
{#
  Search
  --
  #}
{% macro render_search(placeholder, button_text) %}
<div class="listing__search listing-search">
  <input tabindex="0" type="text" class="listing-search__input" name="term" autocomplete="off" aria-label="Search" placeholder="{{ placeholder }}">    
  <button type="submit" class="search-submit" aria-label="Search">{{ button_text }}</button>
</div>
{% endmacro %}

{#
  Filter
  --
  #}
{% macro render_filter(value, option, is_active, show_dots) %}
<li class="data-filter{{ " active" if is_active }}" tabindex="0">
  <label for="{{ value|trim }}">
    <input type="checkbox" name="{{ value|trim }}" data-filter="{{ "." + value|trim if option != "All" else "*" }}" />
    <span>{{ option }}</span>
  </label>
</li>
{% endmacro %}

{#
  Filter Group
  --
  #}
{% macro render_filter_group(name) %}
  <fieldset class="listing-filters__group {{ "single-select" if name in ["group"] }}" data-group="{{ slugify(name)|trim }}" aria-expanded="true">
    <label><h4>{{ name }}</h4></label>
    <ul aria-hidden="false">
      {{ caller() }}
    </ul>
  </fieldset>
{% endmacro %}

{##  CARDS  ##}

{% macro render_loader() %}
<div class="placeholder-content">
  <div class="placeholder-content_item"></div>
  <div class="placeholder-content_item"></div>
  <div class="placeholder-content_item"></div>
  <div class="placeholder-content_item"></div>
  <div class="placeholder-content_item"></div>
  <div class="placeholder-content_item"></div>
  <div class="placeholder-content_item"></div>
  <div class="placeholder-content_item"></div>
  <div class="placeholder-content_item"></div>
  <div class="placeholder-content_item"></div>
</div>
{% endmacro %}

{% macro event_card(item, series, calendar, is_registered, has_access) %}
  {% set title = item.event_name or item.series_name %}
  {% set category = item.type.label or item.columns.type.label %}
  {% set content = series.summary or item.description %}
  {% set path = item.hs_path or item.columns.hs_path %}
  {% set href = "/events/" + path %}
  {% set image_src = series.image_url or series.featured_image.url %}
  {% set datetime = item.start_date or item.columns.date %}
  {% set days = item.days_string %}
  {% set date = item.start_date %}
  {% set time = item.start_time %}
  {% set speaker = item.speaker_name %}
  {% set calendar_name = calendar.calendar_name %}
  {% set number_of_associated_contacts = item.number_of_registered_contacts %}

  {% set options = ["Add to Calendar", "Share"] %}
  {% do options.append("Save") if has_access == "true" %}
  {% do options.append("Mute") if has_access == "true" %}
  {% do options.append("Edit") if is_owner == "true" %}

  {% set actions = ["Going", "Not Going"] %}

  {% set target = slugify(title)|trim %}
  {% set date_target = item.start_date|strtodate('M/d/yy')|format_datetime("MM-dd-YYYY") %}

  <a data-loaded="false" class="trigger-details" data-target="#{{ target }}--{{ date_target }}"></a>
  <div class="event-card__saved">
    <a data-action="unsave">{{ icons("bookmark") }}</a>
  </div>
  {% if has_access == "false" %}
  <div class="event-card__locked">
    <a href="lity--sign_up">{{ icons("lock") }}</a>
  </div>
  {% endif %}
  <div class="event-card__options-wrap">
    <span>{{ icons("dots") }}</span>
    <div class="event-card__options">
      <ul>
        {% for option in options %}
        {% set slug = slugify(option)|trim %}
        <li>
          <a data-action="{{ slug }}" {% if slug == "edit" %}href="#lity--edit__events__selector" data-id="{{ item.hs_object_id }}"{% endif %} class="{{ slug }}"><span>{{ icons(slug) }}</span><span>{{ option }}</span></a>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="event-card__actions-wrap ">
    <div class="event-card__actions-dropdown {{ "active" if is_registered }}">
      <ul>
        {% if has_access == "true" %}<li data-default="RSVP" class="rsvp"><a><span>{{ "Going" if is_registered else "RSVP" }}</span><span>{{ icons("caret-down") }}</span></a></li>
          <li class="event-card__actions">
            <ul>
              {% for action in actions %}
                <li class="{{ "active" if action == "Going" and is_registered }}">
                  <a data-action="{{ slugify(action)|trim }}">{{ action }}</a>
                </li>
              {% endfor %}
            </ul>
          </li>
        {% else %}
          <li class="sign-up"><a href="https://metal.men/trial-member" ><span>Sign-Up to RSVP</span><span>{{ icons("skinny-arrow") }}</span></a></li>
        {% endif %}
      </ul>
    </div>
  </div>
  <div class="event-card__image">
    <img data-src="{{ series.image_url }}" alt="{{ title }} - Featured Image" width="auto" height="auto" />
  </div>
  <div class="event-card__wrap">
    <div class="event-card__date">
      <div>
        <div>
          <span>{{ date }}</span>
          <span>‚è∫</span>
          <span>{{ time }}</span>
        </div>
        <div>
          <span>{{ icons("calendar") }}</span>
          <span>{{ calendar_name }}</span>
        </div>
      </div>
    </div>
    <div class="event-card__content">
      <div class="event-card__title">
        <h3>{{ title }}</h3>
      </div>
      {% if speaker %}
        <div class="event-card__speaker">
          with {{ speaker }}
        </div>
      {% endif %}
      <div class="event-card__summary">
        {{ content|striptags|truncate("100", "...") }}
      </div>
    </div>
    <div class="event-card__footer">
      <div class="event-card__attendees-wrap">
        <div class="event-card__attendees">
          {% for attendee in attendees %}
          <div class="event-attendee">
            <span>{% if attendee.profile_picture %}<img src="{{ attendee.profile_picture }}" alt="{{ attendee.member_name }}" width="50" height="50">{% else %}</span>{% endif %}
          </div>
          {% endfor %}
        </div>
        <div><span data-num="{{ item || 0 }}" class="attendee-number">{{ number_of_associated_contacts || 0 }}</span> Going</div>
      </div>
    </div>
  </div>
{% endmacro %}


{% macro render_event(item, series, calendar, is_saved, is_registered, has_access) %}

{% set filter_props = ["category"] %}
{% set search_props = ["event_name"] %}
{% set classes = [] %}
{% if filter_props %}
  {% for filter_prop_option in filter_props %}
    {% set prop_name = slugify(filter_prop_option)|trim %}
    {% set this_prop_value = series[prop_name] or item[prop_name] %} 
    {% set this_prop_array = item.columns[prop_name] or item[prop_name] %}
    {% if this_prop_value|length > 0 %} 
      {% for this_item in this_prop_value %}
        {% set this_item_value = this_item.label or this_item.name or this_item %}
        {% set append_this = slugify(this_item_value)|trim if filter_prop_option != "year" else this_item_value %} 
        {% do classes.append(append_this) %}
      {% endfor %}
    {% else %} 
      {% set this_item_value = [this_prop_value]|first|attr("label") or [this_prop_value]|first|attr("name") or this_prop_value %}
      {% set append_this = slugify(this_item_value)|trim if filter_prop_option != "year" else this_item_value %}
      {% do classes.append(append_this) %}
    {% endif %}
  {% endfor %}
{% endif %}
{% if search_props %}
  {% set these_search_props = [] %}
  {% for search_prop in search_props %}
    {% set this_prop_value = item.columns[search_prop] or item[search_prop] %}
    {% do these_search_props.append(this_prop_value) %}
  {% endfor %}
{% endif %}
{% if sort_props %}
  {% set these_sort_props = [] %}
  {% for sort_prop in sort_props %}
    {% set this_prop_name = sort_prop.property %}
    {% set this_prop_value = item[this_prop_name].value or item[this_prop_name] %}
    {% do these_sort_props.append(this_prop_value) %}
  {% endfor %}
{% endif %}

{% set this_date = item.start_date or item.columns.datetime %}
{% set formatted_date = this_date|strtodate('M/d/yy')|format_datetime("dd/MM/YYYY") %}
{% set date_unix = item.start_date|strtodate('M/d/yy')|unixtimestamp %}
{% set today_unix = today()|unixtimestamp %}
{% set is_upcoming = { "value": "true" } %}
{% if date_unix < today_unix %}
  {% do is_upcoming.update({"value": "false"}) %}
{% endif %}
{% set date_class = "upcoming" if is_upcoming.value == "true" else "past" %}
{% set show_in_upcoming = "true" if (date_class == "upcoming" and has_access == "true") else "false" %}
{% do classes.append("upcoming") if show_in_upcoming == "true" %}
{% do classes.append("yours") if is_saved %}
{% do classes.append("locked") if has_access == "false" %}

{% set calendar_date = item.start_date|strtodate('M/d/yy')|format_datetime("YYYY-MM-dd") %}
{% set first_part_start_time = "0" + item.start_time|split(":")|first if item.start_time|split(":")|first <= 9 else item.start_time|split(":")|first %}
{% set second_part_start_time = item.start_time|split(" ")|first|split(":")|last %}
{% set formatted_start_time = first_part_start_time + ":" + second_part_start_time %}
{% set first_part_end_time = "0" + item.end_time|split(":")|first if item.end_time|split(":")|first <= 9 else item.end_time|split(":")|first %}
{% set second_part_end_time = item.end_time|split(" ")|first|split(":")|last %}
{% set formatted_end_time = first_part_end_time + ":" + second_part_end_time %}

{% do classes.append(calendar_date) %}

{% set wrap_tag = "a" %}
<div data-test="{{ date_unix }}" data-today="{{ today_unix }}" class="event-card event-data isotope-item item {{ classes|join(" ") }}" 
     data-search="{{ these_search_props|join(" ") }}" 
     data-target="#{{ slugify(item.event_name)|trim }}--{{ date_target }}"
     data-name="{{ item.event_name }}"
     data-description="{{ item.summary }}"
     data-date="{{ formatted_date }}"
     data-start-date="{{ calendar_date }}"
     data-start-time="{{ formatted_start_time }}"
     data-end-time="{{ formatted_end_time }}"
     data-id="{{ item.hs_object_id or item.id }}"
     data-start-date-unix="{{ item.start_date_unix }}"
     data-registered="{{ is_registered }}"
     >
  {{ render_loader() }}
  <div class="event-card__inner">
    {{ event_card(item, series, calendar, is_registered, has_access) }}
  </div>
</div>
{% endmacro %}

{#
  Calendar
  --
  #}
{% macro render_calendar(calendar) %}
<div class="events-calendar">

  
</div>
{% endmacro %}

{% macro render_calendar_view(events) %}
<div class="events__calendar">

  
</div>
{% endmacro %}

{# MODULES #}

{% macro render_video(link) %}
  {% if link is string_containing "vidyard" %}
    {% set video_id = "" %}
    <iframe src="//play.vidyard.com/{{ video_id }}" width='1080' height='720' style="max-width:100%; height: auto;aspect-ratio: 16 / 9;" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true"></iframe>
  {% elif link is string_containing "youtube" %}
    {% set video_id = link|split("v=")|last %}
    <iframe src='https://www.youtube.com/embed/{{ video_id }}?rel=0&controls=0&modestbranding=1&showinfo=0' width='1080' height='720' style="max-width:100%; height: auto;aspect-ratio: 16 / 9;" frameborder='0' allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  {% elif link is string_containing "vimeo" %}
    {% set video_id = link|split("/")|last %}
    <iframe src='https://player.vimeo.com/video/{{ video_id }}' width='1080' height='720' style="max-width:100%; height: auto;aspect-ratio: 16 / 9;"  frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
  {% elif link is string_containing "wistia" %}
    {% set video_id = "" %}
    <script src="//fast.wistia.com/embed/medias/s3lqfi0zn7.jsonp" async></script>
    <script src="//fast.wistia.com/assets/external/E-v1.js" async></script>
    <div class="wistia_embed wistia_async_{{ video_id }}"  width='1080' height='720' style="max-width:100%; height: auto;aspect-ratio: 16 / 9;">&nbsp;</div>                      
  {% endif %}
{% endmacro %}

{# STYLES #}

{% macro flex_grid(obj, break, col_num, vert_spacing, horiz_spacing) %}
  {% set width =  1 / col_num * 100 %}
  {% set row_two = col_num + 1 %}
  {% set next = break + 1 %}
  {% set margin_adjust = horiz_spacing * ((col_num - 1) / col_num) %}
  @media screen and (max-width: {{ break }}px) { {{ obj }} > *:not(:last-child) { margin-bottom: {{ vert_spacing }}px; } }
  @media screen and (min-width: {{ next }}px) { 
    {{ obj }} { display: flex; flex-wrap: wrap; }
    {{ obj }} > * { display: inline-block; width: calc({{ width }}% - {{ margin_adjust }}px); margin-right: {{ horiz_spacing }}px !important; margin-bottom: 0; }
    {{ obj }} > *:nth-child({{ col_num }}n) { margin-right: 0 !important; }
    {{ obj }} > *:nth-child(1n+{{ row_two }}) { margin-top:  {{ vert_spacing }}px; }
  }		
{% endmacro %}

{% macro transition(value) %}-webkit-transition: {{ value }};-moz-transition: {{ value }};-o-transition: {{ value }};-ms-transition: {{ value }};transition: {{ value }};{% endmacro %}
{% macro borderRadius(value) %}-webkit-border-radius: {{ value }};-moz-border-radius: {{ value }};-o-border-radius: {{ value }};-ms-border-radius: {{ value }};border-radius: {{ value }};{% endmacro %}
{% macro boxShadow(value) %}-webkit-box-shadow: {{ value }};-moz-box-shadow: {{ value }};-o-box-shadow: {{ value }};-ms-box-shadow: {{ value }};box-shadow: {{ value }};{% endmacro %}
{% macro textShadow(value) %}-webkit-text-shadow: {{ value }};-moz-text-shadow: {{ value }};-o-text-shadow: {{ value }};-ms-text-shadow: {{ value }};text-shadow: {{ value }};{% endmacro %}
{% macro transform(value) %}-webkit-transform: {{ value }};-moz-transform: {{ value }};-o-transform: {{ value }};-ms-transform: {{ value }}; transform: {{ value }};{% endmacro %}

{% macro isotope_js() %}

    var container = $(".isotope-container");
    var responsiveIsotope = [ [480, 4] , [720, 5] ];
    var itemsPerPageDefault = 5;
    var itemsPerPage = defineItemsPerPage();
    var currentNumberPages = 1;
    var currentPage = 1;
    var currentFilter = '*';
    var filterAttribute = 'data-filter';
    var filterValue = "";
    var filterItem = ".isotope-item";
    var pageAttribute = 'data-page';
    var pagerClass = 'isotope-pager';
    var qsRegex;
    var allFilters;
    var wordPage;
    
     var CreatePagers = function() {
      var $isotopePager = ( $('.'+pagerClass).length == 0 ) ? $('<div class="'+pagerClass+'"></div>') : $('.'+pagerClass);
      $isotopePager.html('');
      if(currentNumberPages > 1) {
        for( var i = 0; i < currentNumberPages; i++ ) {
          var extra_class = (i + 1 == currentPage) ? "active" : "";
          var $pager = $(`<a class="pager ${extra_class}" ${pageAttribute}="${(i+1)}"></a>`);
          $pager.html(i+1);
          $pager.appendTo($isotopePager);
        }
      }
      container.after($isotopePager);
    };
    
    function defineItemsPerPage() {
      var pages = itemsPerPageDefault;
      for( var i = 0; i < responsiveIsotope.length; i++ ) {
        if( $(window).width() <= responsiveIsotope[i][0] ) {
          pages = responsiveIsotope[i][1];
          break;
        }
      }
      return pages;
    }

    function setPagination() {
      var SettingsPagesOnItems = function(){
        var itemsLength = container.children(filterItem).length;
        var pages = Math.ceil(itemsLength / itemsPerPage);
        var item = 1;
        var page = 1;
        var selector = filterItem;
        container.children(allFilters).each(function(){
          if( item > itemsPerPage ) {
            page++;
            item = 1;
          }
          wordPage = page.toString();
          var this_page = $(this).attr('data-page');
          if(this_page) {
            $(this).addClass(this_page);
          } else {
            $(this).addClass(wordPage); 
          }
          item++;
        });
        currentNumberPages = page;
      }();
      CreatePagers();
    }

    function init_grid() {
      setPagination();
console.log("init");
      var thisPage = currentPage.toString();
        container.isotope({
          itemSelector: filterItem,
          layoutMode: 'vertical',
          getSortData: {
              date: function (el) {
              console.log($(el));
              return Date.parse($(el).attr("data-date"));
            }
          },
          sortBy: 'date',
          filter: function() {
            var $this = $(this);
            var pageResult = $this.is("."+thisPage) ? true : false;
            console.log(pageResult);
            var searchResult = qsRegex ? $this.attr("data-search").match( qsRegex ) : true;
            var buttonResult = allFilters ? $this.is( allFilters ) : true;
            return buttonResult && pageResult && searchResult;
          }
        });
    }

    const handle_arrange = function() {
      var itemReveal = Isotope.Item.prototype.reveal;
      Isotope.Item.prototype.reveal = function() {
        itemReveal.apply( this, arguments );
        $( this.element ).removeClass('isotope-hidden');
        $( this.element ).addClass('isotope-visible');
      };

      var itemHide = Isotope.Item.prototype.hide;
      Isotope.Item.prototype.hide = function() {
        itemHide.apply( this, arguments );
        $( this.element ).addClass('isotope-hidden');
        $( this.element ).removeClass('isotope-visible');
      };
    },
          equal_height_blocks = function() {
            var equalize = container,
                max_height = 0;
            if (equalize.length > 0) {
              equalize.each(function() {
                var blocks = $(this).find(filterItem);
                blocks.each(function() {
                  var height = $(this).outerHeight();
                  if (height > max_height) {
                    max_height = height;
                  }
                });
                var new_height = max_height;
                blocks.each(function() {
                  $(this).css("height", new_height);
                });
              });
            }
          },
          handle_mobile = function() {
            if ($(window).width() < 768) {
              $("fieldset").removeClass("active");
            }
          };

    function clearAll(){
      currentFilter = '*';
      wordPage = 1;
      init_grid();
    }
                                       
    
    $('#clear-filters').click(function(){clearAll()});

                                        console.log("test");
    init_grid();

    $(window).on("resize", function() {
      init_grid();
      handle_mobile();
    });

    $('.data-filter').on( 'click', function( event ) {
      var group = $(this).closest('fieldset').attr('data-group'),
          checkbox = $(this).find("input"),
          value = checkbox.attr('data-filter'),
          hasFilter = false,
                                        single_select =  $(this).closest('fieldset').is('.single-select') ? true : false;
      var filterGroup = filters[ group ];
      if ( !filterGroup ) { filterGroup = filters[ group ] = []; }
      if ( checkbox.attr("checked") && value ) {
        checkbox.attr("checked", false);
        $(this).removeClass("active");
        checkbox.closest("li").removeClass("active");
        if (value.indexOf(" ") > -1) {
          var value_array = value.split(" ");
          for (let x=0; x<value_array.length; x++) {
            var this_index = filterGroup.indexOf( value_array[x] );
            filterGroup.splice( this_index, 1 );
          }
        } else {
          var index = filterGroup.indexOf( value );
          filterGroup.splice( index, 1 );
        }
      } else if (value) {
        checkbox.attr("checked", true);
        $(this).addClass("active");
                                              if (single_select) {
                                                $(this).siblings().removeClass('active').find("input").attr("checked", false);
                                              }
        if (value.indexOf(" ") > -1) {
          var value_array = value.split(" ");
          for (let i=0; i<value_array.length; i++) {
            filterGroup.push( value_array[i] );
          }
        } else {
          filterGroup.push( value );
        }
      }
      var comboFilter = getComboFilter();
      allFilters = single_select ? value : comboFilter;
      init_grid();
                                              console.log(allFilters);
      //filterDisplay.text( comboFilter );
      comboFilter = "";
    });

    function getComboFilter() {
      var combo = [];
      for ( var prop in filters ) {
        var group = filters[ prop ];
        if ( !group.length ) {
          combo.push( "*" );
          continue;
        }
        if ( !combo.length ) {
          combo = group.slice(0);
          continue;
        }
        var nextCombo = [];
        for ( var i=0; i < combo.length; i++ ) {
          for ( var j=0; j < group.length; j++ ) {
            var item = combo[i] + group[j];
            nextCombo.push( item );
          }
        }
        combo = nextCombo;
      }
      var comboFilter = combo.join(', ');
      return comboFilter;
    }

    function debounce( fn, threshold ) {
      var timeout;
      threshold = threshold || 100;
      return function debounced() {
        clearTimeout( timeout );
        var args = arguments;
        var _this = this;
        function delayed() {
          fn.apply( _this, args );
        }
        timeout = setTimeout( delayed, threshold );
      };
    }

    var $quicksearch = $(`.listing-search input`).keyup( debounce( function() {
      qsRegex = new RegExp( $quicksearch.val(), 'gi' );
      currentPage = 1;
      init_grid();
    }) );

    const handle_clicks = function() {
      $(".active-trigger").on('click', function() {
        let target = $(this).attr("data-target");
        $(target).toggleClass("active");
      });
      $("fieldset > label").on("click", function() {
        if ($(this).parent().is(".active")) {
          $(this).parent().removeClass("active").attr("aria-expanded", "false");
          $(this).find("ul").attr("aria-hidden", "true");
        } else {
          $(this).parent().addClass("active").attr("aria-expanded", "true");
          $(this).find("ul").attr("aria-hidden", "false");
        }
      });
    };

    handle_clicks();
                                          
      $(document).on("click", ".pager", function() {
        let pageNumber = $(this).attr(pageAttribute);
        currentPage = pageNumber;
        window.location.hash = window.location.href.split('#')[0];
        window.location.hash = `#{{ name }}`;
        init_grid();
      });

{% endmacro %}



<!-- End partial -->